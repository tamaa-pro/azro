<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>رفع تطبيق</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
margin:0;
background:#0b0b0b;
color:#fff;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh
}
.container{
width:100%;
max-width:420px;
padding:16px;
background:#111;
border-radius:10px
}
h2{
margin:0 0 15px;
text-align:center;
font-size:18px
}
input,button{
width:100%;
margin-bottom:10px;
padding:10px;
border-radius:6px;
border:none;
font-size:14px
}
input{
background:#000;
color:#fff;
border:1px solid #222
}
button{
background:#6b2cff;
color:#fff;
font-weight:bold;
cursor:pointer
}
button:disabled{
opacity:.5;
cursor:not-allowed
}
.progress{
height:8px;
background:#000;
border-radius:6px;
overflow:hidden;
margin-bottom:10px;
display:none
}
.bar{
height:100%;
width:0%;
background:#6b2cff;
transition:width .2s
}
.result{
word-break:break-all;
font-size:13px;
background:#000;
padding:8px;
border-radius:6px;
display:none
}
</style>
</head>

<body>
<div class="container">
<h2>رفع تطبيق إلى GitHub</h2>

<input type="file" id="file" accept=".apk" required>
<input type="text" id="name" placeholder="اسم الملف (بدون .apk)" required>
<input type="text" id="version" placeholder="الإصدار (مثال: 2.6)" required>

<button id="upload">رفع</button>

<div class="progress" id="progress">
<div class="bar" id="bar"></div>
</div>

<div class="result" id="result"></div>
</div>

<script>
const btn=document.getElementById("upload");
const bar=document.getElementById("bar");
const progress=document.getElementById("progress");
const result=document.getElementById("result");

btn.onclick=()=>{
const f=document.getElementById("file").files[0];
const name=document.getElementById("name").value.trim();
const ver=document.getElementById("version").value.trim();
if(!f||!name||!ver)return;

btn.disabled=true;
progress.style.display="block";
bar.style.width="0%";
result.style.display="none";

const xhr=new XMLHttpRequest();
xhr.open("POST","https://upload-app-vf.tamaa-production-studios.workers.dev/",true);

xhr.upload.onprogress=e=>{
if(e.lengthComputable){
bar.style.width=((e.loaded/e.total)*100)+"%";
}
};

xhr.onload=()=>{
btn.disabled=false;
if(xhr.status===200){
result.style.display="block";
result.textContent=xhr.responseText;
}else{
alert("فشل الرفع");
}
};

const data=new FormData();
data.append("file",f);
data.append("name",name);
data.append("version",ver);
xhr.send(data);
};
</script>
</body>
</html>
